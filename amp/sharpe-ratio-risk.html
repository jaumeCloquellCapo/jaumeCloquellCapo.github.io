<!doctype html><html amp lang="en"><head><meta charset="utf-8"><title>Portfolio Optimization Based on Sharpe Ratio and Genetic Algorithm - jaumecloquellcapo</title><meta name="description" content="This post shows the application of the theory of genetic algorithms to an optimization problem of a portfolio of shares. Both of the optimization problems and the theory of genetic algorithms are exposed briefly and are useful to solve a specific problems, to find the best assignment&hellip;"><link rel="canonical" href="https://jaumeCloquellCapo.github.io/jaumeCloquellCapo.github.io/sharpe-ratio-risk.html"><meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"><link href="https://fonts.googleapis.com/css?family=Roboto:400,700&display=swap" rel="stylesheet" type="text/css"><script async custom-element="amp-sidebar" src="https://cdn.ampproject.org/v0/amp-sidebar-0.1.js"></script><script async custom-element="amp-social-share" src="https://cdn.ampproject.org/v0/amp-social-share-0.1.js"></script><script async custom-element="amp-analytics" src="https://cdn.ampproject.org/v0/amp-analytics-0.1.js"></script><script async custom-element="amp-iframe" src="https://cdn.ampproject.org/v0/amp-iframe-0.1.js"></script><script async custom-element="amp-video" src="https://cdn.ampproject.org/v0/amp-video-0.1.js"></script><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://jaumeCloquellCapo.github.io/jaumeCloquellCapo.github.io/amp/sharpe-ratio-risk.html"},"headline":"Portfolio Optimization Based on Sharpe Ratio and Genetic Algorithm","datePublished":"2020-03-28T01:28","dateModified":"2020-03-29T17:28","description":"This post shows the application of the theory of genetic algorithms to an optimization problem of a portfolio of shares. Both of the optimization problems and the theory of genetic algorithms are exposed briefly and are useful to solve a specific problems, to find the best assignment&hellip;","author":{"@type":"Person","name":"jaume cloquell capo"},"publisher":{"@type":"Organization","name":"jaume cloquell capo"}}</script><style amp-custom>article,
aside,
footer,
header,
hgroup,
main,
nav,
section {
  display: block; }

*,
*:before,
*:after {
  -webkit-box-sizing: content-box;
  box-sizing: content-box;
  margin: 0;
  padding: 0; }

li {
  list-style: none; }

amp-img {
  max-width: 100%; }

button,
input,
select,
textarea {
  font: inherit; }

html {
  font-size: 1rem; }

body {
  background: #f1f1f1;
  color: #262626;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif;
  line-height: 1.6; }

a {
  color:  #039be5;
  text-decoration: none;
  -webkit-transition: all 0.12s linear 0s;
  -o-transition: all 0.12s linear 0s;
  transition: all 0.12s linear 0s; }

a:hover {
  color: #262626;
  text-decoration: underline;
  -webkit-text-decoration-skip: ink;
  text-decoration-skip: ink; }

a:active {
  color: #262626; }

a:focus {
  outline: 2px dotted #039be5; }

figure,
blockquote,
p,
ul,
ol,
dl,
table,
hr,
fieldset {
  margin-top: 1.6rem; }

h1,
h2,
h3,
h4,
h5,
h6 {
  color: #262626;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif;
  font-weight: 500;
  line-height: 1.2;
  margin-top: 2.13333rem; }

h1 {
  font-size: 1.67583rem;
  font-weight: normal; }

h2 {
  font-size: 1.4729rem; }

h3 {
  font-size: 1.29454rem; }

h4 {
  font-size: 1.13778rem; }

h5 {
  font-size: 1rem; }

h6 {
  font-size: 0.87891rem; }

h2 + p,
h3 + p,
h4 + p,
h5 + p,
h6 + p {
  margin-top: 0.8rem; }

b,
strong {
  font-weight: 600; }

blockquote {
  color: #6c7175;
  font-family: "Droid Serif", "Times", "Source Serif Pro", serif;
  font-style: italic;
  padding: 1.33333rem 0.53333rem 1.33333rem 3.2rem;
  position: relative; }
  blockquote:before {
    display: block;
    content: "\201C";
    font-size: 4.41226rem;
    position: absolute;
    left: 0;
    top: -12px;
    color: rgba(108, 113, 117, 0.5); }
  blockquote > :nth-child(1) {
    margin-top: 0; }

ul,
ol {
  margin-left: 2rem; }
  ul > li,
  ol > li {
    list-style: inherit;
    padding: 0 0 0.26667rem 0.26667rem; }

dl dt {
  color: #262626;
  font-weight: 600; }

code,
pre {
  background-color: #f1f1f1;
  font-family: monospace; }

pre {
  margin: 1.6rem 0 0;
  padding: 1.6rem;
  white-space: pre-wrap;
  word-wrap: break-word;
  overflow-x: auto; }
  pre > code {
    color: #262626;
    padding: 0; }

code {
  border-radius: 3px;
  color: #262626;
  padding: 0.26667rem 0.53333rem; }

table {
  border-collapse: collapse;
  border-spacing: 0;
  border: 1px solid #d4d4d4;
  width: 100%;
  overflow-x: auto;
  vertical-align: top;
  text-align: left;
  white-space: nowrap; }
  table th {
    font-weight: 500;
    padding: 0.53333rem 1.06667rem; }
  table tr {
    border-bottom: 1px solid #d4d4d4; }
    table tr:nth-child(2n) {
      background: #f1f1f1; }
  table td {
    padding: 0.53333rem 1.06667rem; }

figcaption {
  clear: both;
  color: rgba(108, 113, 117, 0.6);
  font-size: 0.82397rem;
  margin: 0.8rem 0 0;
  text-align: center; }

sub,
sup {
  font-size: 65%; }

hr {
  border: 0;
  height: 0;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  border-bottom: 1px solid rgba(255, 255, 255, 0.3); }

.btn, [type=button],
[type=submit],
button {
  background: #039be5;
  border: none;
  border-radius: 2px;
  color: #ffffff;
  cursor: pointer;
  display: inline-block;
  font-size: 0.87891rem;
  font-weight: 500;
  line-height: 1.9;
  padding: 0.53333rem 1.33333rem;
  text-align: center;
  text-decoration: none;
  -webkit-transition: all .15s ease;
  -o-transition: all .15s ease;
  transition: all .15s ease;
  width: auto; }
  .btn:hover, [type=button]:hover,
  [type=submit]:hover,
  button:hover {
    background: #262626;
    color: #ffffff; }
  .btn:focus, [type=button]:focus,
  [type=submit]:focus,
  button:focus {
    outline: none; }
  .btn-outline {
    border: 1px solid #ddd;
    background: #ffffff;
    border-radius: 3px;
    color: #262626; }

[type=button],
[type=submit],
button {
  text-transform: uppercase;
  -webkit-appearance: none;
  -moz-appearance: none; }

.navbar {
  background: #039be5;
  -webkit-box-shadow: 0 0 6px 0 rgba(0, 0, 0, 0.2);
  box-shadow: 0 0 6px 0 rgba(0, 0, 0, 0.2);
  line-height: 3;
  max-height: 4rem; }
  .navbar > div {
    -webkit-box-align: center;
    -ms-flex-align: center;
    align-items: center;
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    -webkit-box-pack: center;
    -ms-flex-pack: center;
    justify-content: center;
    text-align: left;
    max-width: 700px;
    margin: 0 auto; }
  .navbar a {
    color: #ffffff;
    text-decoration: none; }
  .navbar-sidebar-toggle {
    left: 0;
    position: relative;
    text-indent: -99999rem; }
    .navbar-sidebar-toggle:before {
      content: "";
      display: block;
      border-top: 0.375rem double #ffffff;
      border-bottom: 0.125rem solid #ffffff;
      height: 0.125rem;
      position: absolute;
      text-indent: 0;
      top: 50%;
      width: 1.3rem;
      -webkit-transform: translate(0px, -50%);
      -ms-transform: translate(0px, -50%);
      transform: translate(0px, -50%); }


.logo {
            display: inline-block;
  font-weight: 600;
  line-height: 1;
            margin: 0 auto;
            height: 2rem;
            text-indent: -9999px;
            width: 240px;vertical-align: middle;
        }
        .logo.logo-text {
            line-height: 2;
            text-align: center;
            text-indent: 0;
        }

amp-sidebar {
  background: #ffffff;
  width: 240px; }
  amp-sidebar > ul {
    margin: 0.8rem 0 0;
    padding: 0; }
    amp-sidebar > ul ul {
      border-left: 1px solid #d4d4d4;
      margin: 0.53333rem 0 0; }
    amp-sidebar > ul li {
      color: #262626;
      font-size: 0.9375rem;
      font-weight: 600;
      list-style: none;
      line-height: 1.4;
      padding: 0.42667rem 1.06667rem; }
      amp-sidebar > ul li li {
        font-weight: normal;
        padding: 0.26667rem 0 0.26667rem 1.06667rem; }
    amp-sidebar > ul a,
    amp-sidebar > ul a:visited {
      color: #262626; }

.bg-white {
  background: #ffffff; }

.wrap-page {
  max-width: 700px;
  margin: 0 auto; }

@media all and (max-width: 43.6875em) {
  .wrap-inner {
    padding: 0 6%; } }

.page-title {
  background: #ffffff;
  -webkit-box-shadow: 0 2px 3px rgba(38, 38, 38, 0.1);
  box-shadow: 0 2px 3px rgba(38, 38, 38, 0.1);
  margin-bottom: 0.8rem;
  padding: 1.6rem 6%; }
  .page-title > h1 {
    margin: 0;
    font-size: 1.29454rem; }
  .page-title > p {
    font-size: 0.87891rem;
    color: #6c7175;
    line-height: 1.3;
    margin: 0.26667rem 0 0; }
  .page-title-author {
    border-radius: 50%;
    float: left;
    height: 2.5rem;
    width: 2.5rem; }
    .page-title-author + h1 {
      margin-left: 3.5rem; }
      .page-title-author + h1 + p {
        margin-left: 3.5rem; }

.card {
  background: #ffffff;
  -webkit-box-shadow: 0 2px 3px rgba(38, 38, 38, 0.1);
  box-shadow: 0 2px 3px rgba(38, 38, 38, 0.1);
  margin-bottom: 0.8rem;
  padding-bottom: 1.06667rem; }

  .card-meta {
    border-top: 1px solid #d4d4d4;
    color: rgba(108, 113, 117, 0.6);
    font-size: 0.7242rem;
    font-weight: 500;
    margin-top: 1.06667rem;
    padding-top: 1.06667rem;
    text-transform: uppercase; }
    .card-meta a + time:before {
      content: "";
      background: #d4d4d4;
      display: inline-block;
      height: 3px;
      margin: 0 8px;
      width: 3px;
      vertical-align: middle;
      border-radius: 50%; }
  .card-text {
    font-size: 0.9375rem;
    overflow: hidden;
    padding: 0 6%; }
    .card-text h2 {
      font-size: 1.13778rem; }

.post {
  margin-bottom: 2.13333rem; }
  .post-featured-image {
    margin-top: 0;
    position: relative; }
    .post-featured-image > figcaption {
      background: rgba(0, 0, 0, 0.5);
      border-radius: 3px;
      color: #ffffff;
      position: absolute;
      bottom: 0.8rem;
      padding: 0 0.26667rem;
      right: 6%; }
  .post-header {
    margin-bottom: 2.13333rem; }
  .post-meta {
    border-bottom: 1px solid #d4d4d4;
    color: rgba(108, 113, 117, 0.6);
    font-size: 0.7242rem;
    font-weight: 500;
    margin-top: 1.06667rem;
    padding-bottom: 1.06667rem;
    text-transform: uppercase; }
    .post-meta a + time:before {
      content: "";
      background: #d4d4d4;
      display: inline-block;
      height: 3px;
      margin: 0 8px;
      width: 3px;
      vertical-align: middle;
      border-radius: 50%; }
  .post-tag {
    margin: 0; }
    .post-tag > li {
      display: inline-block;
      padding: 0; }
      .post-tag > li a {
        background: #f1f1f1;
        border-radius: 2px;
        color: #6c7175;
        font-size: 0.77248rem;
        display: inline-block;
        margin: 0 0.26667rem 0.26667rem 0;
        padding: 0.26667rem 0.53333rem; }
        .post-tag > li a:hover {
          background: #039be5;
          color: #ffffff;
          text-decoration: none; }
  .post-share {
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    -webkit-box-orient: horizontal;
    -webkit-box-direction: normal;
    -ms-flex-direction: row;
    flex-direction: row;
    -webkit-box-pack: justify;
    -ms-flex-pack: justify;
    justify-content: space-between;
    margin-top: 1.6rem;
    width: 100%; }
    .post-share amp-social-share {
      -webkit-box-flex: 1;
      -ms-flex: 1 0 auto;
      flex: 1 0 auto;
      background-size: 24px; }
  .post-scroll {
    color: #ffffff;
    background: #039be5;
    bottom: 10px;
    border-radius: 50%;
    border: none;
    -webkit-box-shadow: 0 1px 1.5px 0 rgba(38, 38, 38, 0.12), 0 1px 1px 0 rgba(38, 38, 38, 0.24);
    box-shadow: 0 1px 1.5px 0 rgba(38, 38, 38, 0.12), 0 1px 1px 0 rgba(38, 38, 38, 0.24);
    font-size: 1.13778rem;
    height: 46px;
    opacity: 0;
    outline: none;
    position: fixed;
    padding: 0;
    right: 4%;
    visibility: hidden;
    width: 46px;
    z-index: 9999; }
    .post-scroll-marker {
      height: 0px;
      position: absolute;
      top: 100px;
      width: 0px; }
        .post-pagination {
    background: #f1f1f1;
    -webkit-box-shadow: inset 0 2px 3px rgba(38, 38, 38, 0.1);
    box-shadow: inset 0 2px 3px rgba(38, 38, 38, 0.1);
    border-top: 1px solid #d4d4d4;
    padding: 1.06667rem 0; }
    .post-pagination > div {
      line-height: 1.2;
      padding: 0.53333rem 1.06667rem;
      text-align: center; }
      .post-pagination > div span {
        display: block;
        color: #6c7175;
        font-size: 0.7242rem;
        font-weight: 500;
        margin-bottom: 0.26667rem;
        text-transform: uppercase; }
    .post-pagination-prev a:before {
      content: "\2190";
      margin-right: 0.26667rem; }
    .post-pagination-next a:after {
      content: "\2192";
      margin-left: 0.26667rem; }

aside {
  margin: 1.6rem 0 0; }

.align-left {
  text-align: left; }

.align-right {
  text-align: right; }

.align-center {
  text-align: center; }

.align-justify {
  text-align: justify; }

.msg {
  border-left: 2px solid transparent;
  padding: 1.06667rem 1.06667rem; }
  .msg--highlight {
    background-color: #fff8e6;
    border-color: #e2ac4f; }
  .msg--info {
    background: rgba(45, 97, 201, 0.03);
    border-color: #039be5; }
  .msg--success {
    background: #f7fbf6;
    border-color: #5ab44b; }
  .msg--warning {
    background: #fff3f3;
    border-color: #c06367;
    color: #a94442; }

.dropcap:first-letter {
  float: left;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif;
  font-size: 2.16943rem;
  line-height: 0.7;
  margin-right: 0.53333rem;
  padding: 0.53333rem 0.53333rem 0.53333rem 0; }

.pagination {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-pack: justify;
  -ms-flex-pack: justify;
  justify-content: space-between;
  margin: 0.8rem 0; }
  .pagination > a {
    padding-left: 0;
    padding-right: 0;
    width: 49%; }
  .pagination-right {
    margin-left: auto; }

.bottom {
  background: #039be5;
  color: #ffffff;
  padding: 1.06667rem 4%;
  text-align: center; }</style><style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript><script async src="https://cdn.ampproject.org/v0.js"></script><script custom-element="amp-animation" src="https://cdn.ampproject.org/v0/amp-animation-0.1.js" async></script><script custom-element="amp-position-observer" src="https://cdn.ampproject.org/v0/amp-position-observer-0.1.js" async></script></head><body class="bg-white"><nav class="navbar wrap-inner" id="top"><div><a on="tap:navbar-sidebar.toggle" class="navbar-sidebar-toggle" title="Menu">Menu</a> <a class="logo logo-text" href="https://jaumeCloquellCapo.github.io/jaumeCloquellCapo.github.io/amp/">jaumecloquellcapo</a></div></nav><main class="wrap-page"><article class="post"><div class="wrap-inner"><header class="post-header"><h1>Portfolio Optimization Based on Sharpe Ratio and Genetic Algorithm</h1><p class="post-meta">By <a href="https://jaumeCloquellCapo.github.io/jaumeCloquellCapo.github.io/amp/authors/jaume-cloquell-capo/" rel="nofollow" title="jaume cloquell capo">jaume cloquell capo</a> <time datetime="2020-03-28T01:28">March 28, 2020</time></p></header><p>This post shows the application of the theory of genetic algorithms to an optimization problem of a portfolio of shares. Both of the optimization problems and the theory of genetic algorithms are exposed briefly and are useful to solve a specific problems, to find the best assignment when it is necessary to invest. The exposition of this interesting topic is helped by software that allows seeing the step-by-step optimization process by using genetic algorithms.</p><p>For the present post we use the portfolio selection model of Markowitz (1952), using the performance measurement for mutual fund portfolios proposed by Sharpe (1964), a measure that was originally called reward-to-variability ratio and became popular as Sharpe's index, measure or ratio. The following are the basic elements of the Markowitz portfolio selection model and the Sharpe ratio as a measure of performance and optimization of the return/risk ratio.</p><p><span>In particular, we're going to cover:</span></p><div class="post__toc"><h3> </h3><ul><li><a href="#mcetoc_1e4h1dsdl7">Introduction</a><ul><li><a href="#mcetoc_1e4h1ddts6">Modern Portfolio Theory</a></li><li><a href="#mcetoc_1e4f8ehqf1">Sharpe Ratio</a></li></ul></li><li><a href="#mcetoc_1e4grpbd33"> Proposed Methodology</a></li><li><a href="#mcetoc_1e4h2fd850">Portfolio Optimization Using GA</a><ul><li><a href="#mcetoc_1e4gr7i3a1">Parameterization of the algorithm</a></li><li><a href="#mcetoc_1e4h3hqtn0">Representation</a></li><li><a href="#mcetoc_1e4f92ij72">Crossing</a></li><li><a href="#mcetoc_1e4fb64sj1">Fitting function</a></li><li><a href="#mcetoc_1e4fcn20s0">Early stop</a></li></ul></li><li><a href="#mcetoc_1e4fd036u0">Case studies</a></li><li><a href="#mcetoc_1e44o9k7t0">Bibliography</a></li></ul></div><br><h2 id="mcetoc_1e4h1dsdl7">Introduction</h2><p id="mcetoc_1e4h1dugj8">Stock selection is a critically important issue when it comes to investing in the stock market, and the first problem that investors encounter. When investors select stocks, they consider the risk and the return of the stock. However, a single stock with high return usually entails high risk, while a single stock with low risk entails low return. Investors naturally want to invest in stocks with low risk and high return. The fluctuation of stock price can represent the risk of this stock. As the proverb says, “Do not put all your eggs in one basket.” In order to stabilize the fluctuation of stocks, we aggregate different stocks in a portfolio because a good combination of stocks is able to reduce the holistic risk and increase the return. Therefore, this post provides a portfolio which simultaneously considers risk and return to investors.</p><div id="sec3b" class="section_2"><h3 id="mcetoc_1e4h1ddts6">Modern Portfolio Theory</h3><p id="mcetoc_1e4h1hip49">The concept of diversification was formalized with the Modern Theory of Finance. This is how Markowitz (1952) presented a portfolio selection model that incorporated the principles of diversification, identifying a set of efficient portfolios, or the efficient frontier of risky assets. The main idea of this set of risky portfolios is that, for any level of risk, only the portfolio with the highest expected return is of interest. Alternatively, the frontier is the set of portfolios that minimizes the variance for any expected return goal.</p><figure class="post__image post__image--center"><amp-img src="https://jaumeCloquellCapo.github.io/jaumeCloquellCapo.github.io/media/posts/17/chou4-2756842-small.gif" alt="" width="550" height="146" layout="responsive"></amp-img></figure><br><br>The application of this model corresponds, in the first instance, to determining the risk-return opportunities available to the investor, which are summarized in the frontier of minimum variance of risky assets. This agrees with the minimum possible variance that can be obtained given the expected return of a portfolio. From the data on expected returns, variance and covariances, the minimum-variance portfolio can be calculated for any level of expected return.<br><br>However, it is important to consider that Markowitz develops its model based on the following assumptions:<p></p><ol><li>The return of any asset or portfolio is described by a subjective random variable, whose probability distribution for the reference period is known to the investor;</li><li>The risk of an asset or portfolio is measured by the variance (or standard deviation, σ) of the random variable representative of its return;</li><li>The investor will prefer financial assets that have a higher return for a given risk, or a lower risk for a known return. This decision rule is called rational investor behaviour, it assumes that investors are risk averse;</li><li>There are no market "imperfections" such as taxes and transaction costs</li></ol><p>Following portfolio theory, methods and indicators for the evaluation of risk-adjusted performance using the mean-variance criterion appeared, such as the contributions of Treynor (1965), Sharpe (1966) and Jensen (1968), who agreed that the performance of a portfolio, in terms of return and risk, could be evaluated jointly. This post focuses particularly on William Sharpe's approach, since his indicator (Sharpe's ratio) comes from a simplifying model of the Markowits portfolio selection model, by reducing the number of data required for its use. </p></div><h3 id="mcetoc_1e4f8ehqf1"><strong>Sharpe Ratio</strong></h3><p>The Sharpe ratio was proposed by William Sharpe, a winner of the Nobel Memorial Prize in Economic Sciences in 1990. The Sharpe ratio is based on the capital asset pricing model, which is one of the basic and significant investment theories. The Sharpe ratio is utilized to measure the performance of a stock; it is a representative index to assess stocks. Choosing and holding the portfolio which has low risk and high return is the purpose of the Sharpe ratio. The formula of the Sharpe ratio is given by formula  where <span id="MathJax-Element-13-Frame" class="MathJax" tabindex="0"><span id="MathJax-Span-216" class="math"><span id="MathJax-Span-217" class="mrow"><span id="MathJax-Span-218" class="msubsup"><span id="MathJax-Span-219" class="mi">R</span><span id="MathJax-Span-220" class="texatom"><span id="MathJax-Span-221" class="mrow"><span id="MathJax-Span-222" class="mi">f</span></span></span></span></span></span></span> is the risk-free rate of interest. By selecting the higher Sharpe ratio, investors invest in the portfolio which has minimal investment risk with the same amount of return or maximal return with the same investment risk:</p><div><figure class="post__image post__image--center"><amp-img src="data:image/png;base64,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" data-is-external-image="true" alt="Ratio de Sharpe - Qué es, definición y concepto | Economipedia" width="172" height="143" data-noaft="1" layout="responsive"></amp-img></figure></div><p>where r is the return on the portfolio, $r_{rf}$ is the risk-free return and $\sigma$ is the <a href="https://mathworld.wolfram.com/StandardDeviation.html">standard deviation</a> of the fund's returns.</p><p>Given the nature of this new objective function, it is clear that both any increase in performance and any decrease in risk will increase the value of the function.  </p><h2 id="mcetoc_1e4grpbd33"> Proposed Methodology</h2><p>To explore the efficiency of the market portfolio, this paper contrasts the performance with a hypothetical portfolio that optimizes the risk-return ratio using data observed for 1 year, following the strategy of the portfolio theory from an algorithm that maximizes the Sharpe ratio.<br><br>Our method combines the Sharpe ratio and genetic algorithms (GA) to solve the problem of stock selection. Because this paper does not restrict the stock number of a portfolio, there are massive combinations in the search space. GA is utilized to find the best assignment of portfolio that has the low risk and high return in the huge search space.</p><p>For the development of this optimization model it is necessary to consider the following criteria that have been defined in order to obtain a reliable and properly structured database:</p><ul><li>The information used for portfolio optimization considers a representative index of the Spanish equity market, for which the IBEX35 was selected, which is composed of the most representative shares of the market in that country.</li><li>The sample used for the optimization is a daily frequency.</li><li>The closing prices obtained through the Yahoo international information terminal, are used and the actual daily returns are subsequently calculated.</li></ul><h2 id="mcetoc_1e4h2fd850">Portfolio Optimization Using GA</h2><p>As we explained in the previous <a href="https://jaumeCloquellCapo.github.io/jaumeCloquellCapo.github.io/amp/introduccion-a-los-algoritmos-geneticos.html">post</a>, an optimization problem is about choosing the values of the decision variables that will optimize the objective function within a solution space. Unlike classical methods of optimization, the genetic algorithm does not choose an initial solution but a set of solutions known as the initial population. Some of the phases of a genetic algorithm are as follows:</p><ul><li>Fitting function</li><li>Selection method</li><li>Genetic operations:<ul><li>Crossing</li><li>Mutation</li></ul></li><li>Generation of new population</li></ul><h3 id="mcetoc_1e4gr7i3a1">Parameterization of the algorithm</h3><p>Although the results are dependent to a greater or lesser extent on the particular problem, the parameters were chosen according to the following criteria:</p><ul><li><strong>Population size:</strong> in general terms, the initial population should be as varied as possible. The distribution of skills needs to be uniform to avoid premature convergence, and there also needs to be a variety of patterns. Population size varies between 50 and 100 individuals; smaller values often pose serious problems of premature convergence and larger values require a large computational effort without appreciable improvement. Different initial populations were evaluated; the performance evaluation in the different examples shows that the best results are observed when the initial population varies between 60 and 150 individuals. In the final algorithm, an initial population of 100 elements was chosen.</li><li><strong>Mutation probability:</strong> the best performances are obtained in general, with crossing rates varying between 20% and 60% and mutation rates between 0.1% and 5%. Although there is no particular criterion for choosing a given value, a mutation probability of 5% and a crossing rate of 20% (number of parents to be selected) were chosen, since different authors have recommended these parameters.</li><li><strong>Maximum generations:</strong> the maximum number of iterations depends on the specified precision and varies greatly from one problem to another; it is common to use a maximum iteration of 50 for complex assessment problems and a maximum iteration of 1,000 for simple assessment problems. For the present approach it was decided to use a maximum iteration of 200.</li></ul><h3 id="mcetoc_1e4h3hqtn0">Representation</h3><p id="mcetoc_1e4h3htsf1">In the encoding with GA in our method, chromosome represents the weights which are assignmed in the portfolio.<br><br>Our key constraint is that all the portfolio weights should sum to 1.0. What this means, practically, is that all of our cash should be invested in an asset.</p><h3 id="mcetoc_1e4f92ij72">Crossing</h3><p id="mcetoc_1e4f90h3m1">The objective of the crossing is to generate, from individuals already existing (parental), new individuals (offspring) combining the characteristics of the previous ones. In this post we have implemented two strategies although there are more ont the literature.</p><ul><li>Crossing from a single point: randomly selected a position that acts as a cut-off point. Each individual parent is divide into two parts and exchange the halves. As a result of this process, for every crossing, two new individuals are generated.</li></ul><figure class="post__image post__image--center"><amp-img src="https://www.tutorialspoint.com/genetic_algorithms/images/multi_point_crossover.jpg" data-is-external-image="true" alt="Genetic Algorithms - Crossover - Tutorialspoint" width="600" height="143" data-noaft="1" layout="responsive"></amp-img></figure><ul><li>Uniform crossing: the value that each position of the new individual is obtained from one of the two parents. Usually, the probability of the value coming from each parent is the same, although it could, for example, be conditioned by one's fitness.<br>Unlike the previous strategies, with this one, each crossing is generates a single offspring.</li></ul><figure class="post__image post__image--center"><amp-img src="data:image/png;base64,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" data-is-external-image="true" alt="Example of uniform crossover | Download Scientific Diagram" width="363" height="139" data-noaft="1" layout="responsive"></amp-img></figure><p>Below, you can see the implementation. The first step consist to extract a copy from one parent to create te new children.  Depens of the configuration, the new children receive one porperty from one parent or another.</p><figure class="post__image post__image--center"><amp-img src="https://jaumeCloquellCapo.github.io/jaumeCloquellCapo.github.io/media/posts/17/Captura-de-pantalla-de-2020-03-28-02-04-11.png" sizes="(max-width: 48em) 100vw, 768px" srcset="https://jaumeCloquellCapo.github.io/jaumeCloquellCapo.github.io/media/posts/17/responsive/Captura-de-pantalla-de-2020-03-28-02-04-11-xs.png 300w ,https://jaumeCloquellCapo.github.io/jaumeCloquellCapo.github.io/media/posts/17/responsive/Captura-de-pantalla-de-2020-03-28-02-04-11-sm.png 480w ,https://jaumeCloquellCapo.github.io/jaumeCloquellCapo.github.io/media/posts/17/responsive/Captura-de-pantalla-de-2020-03-28-02-04-11-md.png 768w ,https://jaumeCloquellCapo.github.io/jaumeCloquellCapo.github.io/media/posts/17/responsive/Captura-de-pantalla-de-2020-03-28-02-04-11-lg.png 1024w ,https://jaumeCloquellCapo.github.io/jaumeCloquellCapo.github.io/media/posts/17/responsive/Captura-de-pantalla-de-2020-03-28-02-04-11-xl.png 1360w ,https://jaumeCloquellCapo.github.io/jaumeCloquellCapo.github.io/media/posts/17/responsive/Captura-de-pantalla-de-2020-03-28-02-04-11-2xl.png 1600w" alt="" width="676" height="708" layout="responsive"></amp-img></figure><p class="align-center"><strong>Mutation method</strong> </p><h3 id="mcetoc_1e4fb64sj1">Fitting function</h3><p id="mcetoc_1e4fci7842">To understand optimization algorithms, we first need to understand the concept of minimization. Maximization is a similar concept to optimization - let's say we have a simple equation y = x2 - the idea is we're trying to figure out what value of x will maximize y, in this example Infinite. This idea of a maximixer will allow us to build an optimizer.</p><p>In our case we're trying to find a portfolio that maximizes the Sharpe Ratio. To achieve the goal of maximizes the Sharpe Ratio function we must create some functions that will generate the expected portfolio performance, performance weights, and the standard deviation of the portfolio, sharpe ratio and many random portfolios.</p><p class="align-left">First, In order to simulate thousands of possible allocations for our simulation we'll be using a few statistics, one of which is mean daily return. For this we're going to switch to using logarithmic returns instead of arithmetic returns. In the world of finance, the arithmetic mean is not usually an appropriate method for calculating an <a href="https://www.investopedia.com/ask/answers/06/geometricmean.asp">average</a>.</p><p>Then, into <em>__shrape</em> function we calculate return, volatility, and the Sharpe Ratio as of the logarithmic mean. Also, the method has one param, that are the weight of every component of the portfolio generated on the current iteration</p><p class="align-center"> </p><figure class="post__image post__image--center"><amp-img src="https://jaumeCloquellCapo.github.io/jaumeCloquellCapo.github.io/media/posts/17/Captura-de-pantalla-de-2020-03-28-02-20-08.png" sizes="(max-width: 48em) 100vw, 768px" srcset="https://jaumeCloquellCapo.github.io/jaumeCloquellCapo.github.io/media/posts/17/responsive/Captura-de-pantalla-de-2020-03-28-02-20-08-xs.png 300w ,https://jaumeCloquellCapo.github.io/jaumeCloquellCapo.github.io/media/posts/17/responsive/Captura-de-pantalla-de-2020-03-28-02-20-08-sm.png 480w ,https://jaumeCloquellCapo.github.io/jaumeCloquellCapo.github.io/media/posts/17/responsive/Captura-de-pantalla-de-2020-03-28-02-20-08-md.png 768w ,https://jaumeCloquellCapo.github.io/jaumeCloquellCapo.github.io/media/posts/17/responsive/Captura-de-pantalla-de-2020-03-28-02-20-08-lg.png 1024w ,https://jaumeCloquellCapo.github.io/jaumeCloquellCapo.github.io/media/posts/17/responsive/Captura-de-pantalla-de-2020-03-28-02-20-08-xl.png 1360w ,https://jaumeCloquellCapo.github.io/jaumeCloquellCapo.github.io/media/posts/17/responsive/Captura-de-pantalla-de-2020-03-28-02-20-08-2xl.png 1600w" alt="" width="581" height="484" layout="responsive"></amp-img></figure><p class="align-center"><strong>Fitness method</strong> </p><h3 id="mcetoc_1e4fcn20s0">Early stop</h3><p>When you are solving a problems without know te results, one of the problems are that you are not know when te algorithm has finished. For this, I have develop a param into main function to detect if during the last 'stop_rounds' generations the difference<br>absolute among better individuals is not higher than the value of  'stop_tolerance', the algorithm is stopped. The 'stop_rounds' is  the number of consecutive generations with no minimum improvement to activate the early stop. And the 'stop_tolerance' is the minimum value that must have the difference of consecutive generations to consider that there is change</p><figure class="post__image post__image--center"><amp-img src="https://jaumeCloquellCapo.github.io/jaumeCloquellCapo.github.io/media/posts/17/Captura-de-pantalla-de-2020-03-28-02-42-29.png" sizes="(max-width: 48em) 100vw, 768px" srcset="https://jaumeCloquellCapo.github.io/jaumeCloquellCapo.github.io/media/posts/17/responsive/Captura-de-pantalla-de-2020-03-28-02-42-29-xs.png 300w ,https://jaumeCloquellCapo.github.io/jaumeCloquellCapo.github.io/media/posts/17/responsive/Captura-de-pantalla-de-2020-03-28-02-42-29-sm.png 480w ,https://jaumeCloquellCapo.github.io/jaumeCloquellCapo.github.io/media/posts/17/responsive/Captura-de-pantalla-de-2020-03-28-02-42-29-md.png 768w ,https://jaumeCloquellCapo.github.io/jaumeCloquellCapo.github.io/media/posts/17/responsive/Captura-de-pantalla-de-2020-03-28-02-42-29-lg.png 1024w ,https://jaumeCloquellCapo.github.io/jaumeCloquellCapo.github.io/media/posts/17/responsive/Captura-de-pantalla-de-2020-03-28-02-42-29-xl.png 1360w ,https://jaumeCloquellCapo.github.io/jaumeCloquellCapo.github.io/media/posts/17/responsive/Captura-de-pantalla-de-2020-03-28-02-42-29-2xl.png 1600w" alt="" width="501" height="461" layout="responsive"></amp-img></figure><p id="mcetoc_1e4fcn20s0" class="align-center"><strong>Early stop method</strong><span> </span></p><h2 id="mcetoc_1e4fd036u0">Case studies</h2><p>As output of the genetic algorithm can be visualized for each generation, which has been the best combination along with the list of the best weights. We select an investment portfolio formed by Cellnex Telecom, S.A.(MTS.MC) , ArcelorMittal (MTS.MC), Ferrovial, S.A. (FER.MC) and Banco Santander, S.A. (SAN.MC).</p><figure class="post__image post__image--center"><amp-img src="https://jaumeCloquellCapo.github.io/jaumeCloquellCapo.github.io/media/posts/17/22.png" sizes="(max-width: 48em) 100vw, 768px" srcset="https://jaumeCloquellCapo.github.io/jaumeCloquellCapo.github.io/media/posts/17/responsive/22-xs.png 300w ,https://jaumeCloquellCapo.github.io/jaumeCloquellCapo.github.io/media/posts/17/responsive/22-sm.png 480w ,https://jaumeCloquellCapo.github.io/jaumeCloquellCapo.github.io/media/posts/17/responsive/22-md.png 768w ,https://jaumeCloquellCapo.github.io/jaumeCloquellCapo.github.io/media/posts/17/responsive/22-lg.png 1024w ,https://jaumeCloquellCapo.github.io/jaumeCloquellCapo.github.io/media/posts/17/responsive/22-xl.png 1360w ,https://jaumeCloquellCapo.github.io/jaumeCloquellCapo.github.io/media/posts/17/responsive/22-2xl.png 1600w" width="1044" height="794" layout="responsive"></amp-img></figure><p class="align-center"><strong>Daily prices of the companies for 1 year</strong></p><p>If we select an investment portfolio formed by Cellnex Telecom, S.A.(MTS.MC) , ArcelorMittal (MTS.MC), Ferrovial, S.A. (FER.MC) and Banco Santander, S.A. (SAN.MC). The results are as follows: 0% Telecom and 0,1% ArcelorMittal, 0% Ferrovial and 99% Banco Santander . If we look at the allocations, it makes perfect sense since the strongest company is Santander and it has a much higher return than the rest and therefore should be given more weight to investment. On the other hand, the companies with a negative average are assigned less than 1% of the total weightof the portfolio. </p><figure class="post__image post__image--center"><amp-img src="https://jaumeCloquellCapo.github.io/jaumeCloquellCapo.github.io/media/posts/17/Captura-de-pantalla-de-2020-03-28-18-45-24.png" sizes="(max-width: 48em) 100vw, 768px" srcset="https://jaumeCloquellCapo.github.io/jaumeCloquellCapo.github.io/media/posts/17/responsive/Captura-de-pantalla-de-2020-03-28-18-45-24-xs.png 300w ,https://jaumeCloquellCapo.github.io/jaumeCloquellCapo.github.io/media/posts/17/responsive/Captura-de-pantalla-de-2020-03-28-18-45-24-sm.png 480w ,https://jaumeCloquellCapo.github.io/jaumeCloquellCapo.github.io/media/posts/17/responsive/Captura-de-pantalla-de-2020-03-28-18-45-24-md.png 768w ,https://jaumeCloquellCapo.github.io/jaumeCloquellCapo.github.io/media/posts/17/responsive/Captura-de-pantalla-de-2020-03-28-18-45-24-lg.png 1024w ,https://jaumeCloquellCapo.github.io/jaumeCloquellCapo.github.io/media/posts/17/responsive/Captura-de-pantalla-de-2020-03-28-18-45-24-xl.png 1360w ,https://jaumeCloquellCapo.github.io/jaumeCloquellCapo.github.io/media/posts/17/responsive/Captura-de-pantalla-de-2020-03-28-18-45-24-2xl.png 1600w" alt="" width="835" height="204" layout="responsive"></amp-img></figure><p class="align-center"><strong>Output generate for the software</strong></p><p class="align-center"> </p><figure class="post__image post__image--center"><amp-img src="https://jaumeCloquellCapo.github.io/jaumeCloquellCapo.github.io/media/posts/17/indice.png" sizes="(max-width: 48em) 100vw, 768px" srcset="https://jaumeCloquellCapo.github.io/jaumeCloquellCapo.github.io/media/posts/17/responsive/indice-xs.png 300w ,https://jaumeCloquellCapo.github.io/jaumeCloquellCapo.github.io/media/posts/17/responsive/indice-sm.png 480w ,https://jaumeCloquellCapo.github.io/jaumeCloquellCapo.github.io/media/posts/17/responsive/indice-md.png 768w ,https://jaumeCloquellCapo.github.io/jaumeCloquellCapo.github.io/media/posts/17/responsive/indice-lg.png 1024w ,https://jaumeCloquellCapo.github.io/jaumeCloquellCapo.github.io/media/posts/17/responsive/indice-xl.png 1360w ,https://jaumeCloquellCapo.github.io/jaumeCloquellCapo.github.io/media/posts/17/responsive/indice-2xl.png 1600w" alt="" width="418" height="262" layout="responsive"></amp-img></figure><p class="align-center"><strong>Ratio value for every portofolio</strong></p><blockquote><p>Needless to say, this is not an invitation to buy and sell assets.</p><div class="post__iframe"><amp-iframe sandbox="allow-scripts allow-same-origin" layout="responsive" width="480" height="270" src="https://giphy.com/embed/j3WGZFgTGYKTPH3NtM" frameborder="0" class="giphy-embed" allowfullscreen="allowfullscreen" data-mce-fragment="1"></amp-iframe></div><p><a href="https://giphy.com/gifs/MovistarPlus-business-take-my-money-la-resistencia-j3WGZFgTGYKTPH3NtM">via GIPHY</a></p></blockquote><h2 id="mcetoc_1e44o9k7t0">Bibliography</h2><ol><li>Rodríguez, M. P., Cortez, K. A., Méndez, A. B. y Garza, H. H. (2015). Análisis de portafolios por sectores mediante el uso de algoritmos genéticos: caso aplicado a la Bolsa Mexicana de Valores. Contaduría y Administración, 60(1), 87-112.</li><li>Castro Enciso S. Fernando, “Creación de Portafolios de Inversión utilizando Algoritmos Evolutivos Multiobjetivo”, Tesis de Licenciatura, Centro de Investigación y Estudios Avanzados del Instituto Politécnico Nacional, México, D.F, (2005).</li></ol><p><a href="https://github.com/jaumeCloquellCapo/portfolio-optimizer">Github</a></p><aside><ul class="post-tag"><li><a href="https://jaumeCloquellCapo.github.io/jaumeCloquellCapo.github.io/amp/geneticalgorithms/">Genetic Algorithms</a></li><li><a href="https://jaumeCloquellCapo.github.io/jaumeCloquellCapo.github.io/amp/machine-learning/">Machine Learning</a></li></ul><div class="post-share"><amp-social-share type="system" width="40" height="40" data-param-text="Portfolio Optimization Based on Sharpe Ratio and Genetic Algorithm"></amp-social-share><amp-social-share type="facebook" width="40" height="40" data-param-app_id="" data-param-text="Portfolio Optimization Based on Sharpe Ratio and Genetic Algorithm" data-param-href="https://jaumeCloquellCapo.github.io/jaumeCloquellCapo.github.io/amp/sharpe-ratio-risk.html"></amp-social-share><amp-social-share type="twitter" width="40" height="40" data-param-text="Portfolio Optimization Based on Sharpe Ratio and Genetic Algorithm" data-param-url="https://jaumeCloquellCapo.github.io/jaumeCloquellCapo.github.io/amp/sharpe-ratio-risk.html"></amp-social-share><amp-social-share type="pinterest" width="40" height="40" data-param-url="https://jaumeCloquellCapo.github.io/jaumeCloquellCapo.github.io/amp/sharpe-ratio-risk.html"></amp-social-share><amp-social-share type="tumblr" width="40" height="40" data-param-text="Portfolio Optimization Based on Sharpe Ratio and Genetic Algorithm" data-param-url="https://jaumeCloquellCapo.github.io/jaumeCloquellCapo.github.io/amp/sharpe-ratio-risk.html"></amp-social-share><amp-social-share type="whatsapp" width="40" height="40" data-param-text="Portfolio Optimization Based on Sharpe Ratio and Genetic Algorithm" data-param-url="https://jaumeCloquellCapo.github.io/jaumeCloquellCapo.github.io/amp/sharpe-ratio-risk.html"></amp-social-share></div></aside></div></article><nav class="post-pagination wrap-inner"><div class="post-pagination-prev"><span>Previous</span> <a href="https://jaumeCloquellCapo.github.io/jaumeCloquellCapo.github.io/amp/introduccion-a-los-algoritmos-geneticos.html">Introduction to Genetic Algorithms</a></div><div class="post-pagination-next"><span>Next</span> <a href="https://jaumeCloquellCapo.github.io/jaumeCloquellCapo.github.io/amp/intersection-observer-api.html">Intersection Observer API in React</a></div></nav></main><amp-animation id="showAnim" layout="nodisplay"><script type="application/json">{
                    "duration": "200ms",
                    "fill": "both",
                    "iterations": "1",
                    "direction": "alternate",
                    "animations": [{
                        "selector": ".post-scroll",
                        "keyframes": [{
                            "opacity": "1",
                            "visibility": "visible",
                            "transform": "scale(1)"
                        }]
                    }]
                }</script></amp-animation><amp-animation id="hideAnim" layout="nodisplay"><script type="application/json">{
                    "duration": "200ms",
                    "fill": "both",
                    "iterations": "1",
                    "direction": "alternate",
                    "animations": [{
                        "selector": ".post-scroll",
                        "keyframes": [{
                            "opacity": "0",
                            "visibility": "hidden",
                            "transform": "scale(0.1)"
                        }]
                    }]
                }</script></amp-animation><div class="post-scroll-marker"><amp-position-observer on="enter:hideAnim.start; exit:showAnim.start" layout="nodisplay"></amp-position-observer></div><button class="post-scroll" on="tap:top.scrollTo(duration=200)">&#8593;</button><footer class="bottom">Powered by Publii</footer><amp-sidebar id="navbar-sidebar" layout="nodisplay"><ul><li><a href="https://jaumeCloquellCapo.github.io/jaumeCloquellCapo.github.io/amp/" title="https://jaumecloquellcapo.github.io/jaumeCloquellCapo.github.io/">Home</a></li><li><a href="https://jaumeCloquellCapo.github.io/jaumeCloquellCapo.github.io/amp/js/">JS</a></li><li><a href="https://jaumeCloquellCapo.github.io/jaumeCloquellCapo.github.io/amp/machine-learning/">AI</a><ul class="navbar__submenu level-2" aria-hidden="true"><li><a href="https://jaumeCloquellCapo.github.io/jaumeCloquellCapo.github.io/amp/abm/" target="_self">ABM</a></li><li><a href="https://jaumeCloquellCapo.github.io/jaumeCloquellCapo.github.io/amp/nlp/" target="_self">NLP</a></li><li><a href="https://jaumeCloquellCapo.github.io/jaumeCloquellCapo.github.io/amp/geneticalgorithms/" target="_self">Genetic Algorithms</a></li></ul></li><li><a href="https://jaumeCloquellCapo.github.io/jaumeCloquellCapo.github.io/amp/golang/">Golang</a></li></ul></amp-sidebar><amp-analytics type="googleanalytics" id="analytics1"><script type="application/json">{
            "vars": {
                "account": "UA-154192610-1"
            },
            "triggers": {
                "trackPageview": {
                    "on": "visible",
                    "request": "pageview"
                }
            }
        }</script></amp-analytics></body></html>